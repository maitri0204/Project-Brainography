{% extends "base.html" %}
{% block content %}
<style>
    .form-container {
        max-width: 600px;
        margin: 0 auto;
        background: #f9f9f9;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }
    .form-group {
        margin-bottom: 20px;
    }
    .form-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
        color: #333;
    }
    .form-group input, .form-group select {
        width: 100%;
        padding: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
        font-size: 16px;
        box-sizing: border-box;
    }
    .form-group input:focus {
        border-color: #18447e;
        outline: none;
    }
    .btn-submit {
        background: #18447e;
        color: white;
        padding: 12px 30px;
        border: none;
        border-radius: 4px;
        font-size: 16px;
        cursor: pointer;
        width: 100%;
    }
    .btn-submit:hover {
        background: #13315c;
    }
    .error-message {
        color: #dc3545;
        font-size: 14px;
        margin-top: 5px;
        display: none;
    }
    .file-info {
        font-size: 12px;
        color: #666;
        margin-top: 5px;
    }
    .current-logo {
        margin-top: 10px;
        padding: 10px;
        background: #e9ecef;
        border-radius: 4px;
    }
    .current-logo img {
        max-width: 100px;
        max-height: 100px;
        border-radius: 4px;
    }
</style>

<div class="form-container">
    <h2>Edit Franchise</h2>
    <form method="POST" enctype="multipart/form-data" id="franchiseForm">
        <div class="form-group">
            <label>Franchise Name: *</label>
            <input type="text" name="franchise_name" value="{{ franchise.franchise_name }}" required>
        </div>
        <div class="form-group">
            <label>Company Name: *</label>
            <input type="text" name="company_name" value="{{ franchise.company_name }}" required>
        </div>
        <div class="form-group">
            <label>Address: *</label>
            <input type="text" name="address" value="{{ franchise.address }}" required>
        </div>
        <div class="form-group">
            <label>Phone: *</label>
            <input type="text" name="phone" value="{{ franchise.phone }}" required>
        </div>
        <div class="form-group">
            <label>Email: *</label>
            <input type="email" name="email" value="{{ franchise.email }}" required>
        </div>
        <!-- <div class="form-group">
            <label>Website:</label>
            <input type="text" name="website" value="{{ franchise.website }}">
        </div> -->
        <div class="form-group">
            <label>GST Number: </label>
            <input type="text" name="gstnumber" value="{{ franchise.gst_number }}">
        </div>
        <div class="form-group">
            <label>PAN Number: *</label>
            <input type="text" name="pannumber" value="{{ franchise.pan_number }}" required>
        </div>
        <!-- <div class="form-group">
            <label>Upload New Logo (max 2MB)</label>
            <input type="file" name="logo" id="logoFile" accept="image/*">
            <div class="file-info">Accepted formats: JPG, PNG, GIF. Maximum size: 2MB</div>
            <div class="error-message" id="fileError">File size must not exceed 2MB</div>
            {% if franchise.logo_filename %}
            <div class="current-logo">
                <strong>Current Logo:</strong><br>
                <img src="{{ url_for('static', filename=franchise.logo_filename) }}" alt="Current Logo">
                <p>{{ franchise.logo_filename }}</p>
            </div>
            {% endif %}
        </div> -->
        <button type="submit" class="btn-submit">Update Franchise</button>
    </form>
</div>

<script>
document.getElementById('logoFile').addEventListener('change', function() {
    const file = this.files[0];
    const errorDiv = document.getElementById('fileError');
    const submitBtn = document.querySelector('.btn-submit');
    
    if (file) {
        const fileSize = file.size / 1024 / 1024; // Convert to MB
        
        if (fileSize > 2) {
            errorDiv.style.display = 'block';
            this.value = ''; // Clear the file input
            submitBtn.disabled = true;
            submitBtn.style.background = '#ccc';
        } else {
            errorDiv.style.display = 'none';
            submitBtn.disabled = false;
            submitBtn.style.background = '#18447e';
        }
    }
});

// Form validation before submission
document.getElementById('franchiseForm').addEventListener('submit', function(e) {
    const fileInput = document.getElementById('logoFile');
    const file = fileInput.files[0];
    
    if (file) {
        const fileSize = file.size / 1024 / 1024; // Convert to MB
        
        if (fileSize > 2) {
            e.preventDefault();
            alert('Please select a file smaller than 2MB');
            return false;
        }
    }
});
</script>
{% endblock %}
